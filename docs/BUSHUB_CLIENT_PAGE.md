# 버스환승센터 클라이언트 페이지 사양서

## 개요

본 문서는 버스환승센터 클라이언트 시스템의 주요 페이지별 기능과 UI/UX 사양을 정의합니다. 실제 구현된 시스템을 기반으로 작성되었습니다.

### 지원 장비 타입

- **조명 (d011)**: 자동/수동 모드, 스케줄 설정, 1차/2차 시간 설정, 전원 제어
- **냉난방기 (d021)**: 자동/수동 모드, 온도 설정, 풍량 설정, 운전 모드 (냉방/난방/송풍)
- **전열교환기 (d022)**: 자동/수동 모드, 풍량 설정, 운전 모드, 전원 제어
- **에어커튼 (d023)**: 자동/수동 모드, 스케줄 설정, 전원 제어
- **온열벤치 (d041)**: 자동/수동 모드, 스케줄 설정, 전원 제어
- **자동문 (d051)**: 자동/수동 모드, 스케줄 설정, 전원 제어
- **자동문외부스위치 (d071)**: 자동/수동 모드, 스케줄 설정, 전원 제어
- **통합센서 (d061)**: 환경 데이터 수집 (PM, CO2, VOC, 온습도), 실시간 모니터링

## 페이지 구성

### 1. 대시보드 페이지 (Dashboard)

**목적**: 전체 장비의 상태를 간단히 보여주는 메인 페이지

**주요 기능**:

- 전체 장비 상태 개요 표시
- 장비별 상태 요약 (정상/경고/오류)
- 장비별 자동/수동 모드 상태 표시
- 스케줄 모드 활성화 상태 모니터링
- 실시간 모니터링 정보 (WebSocket 기반)
- 빠른 액세스 메뉴
- **데이터 적용 카드**: 스냅샷 데이터 적용 기능
- **모드 제어 카드**: 전체 장비 모드 전환 기능
- 장비별 필터링 (타입별, 상태별)
- 실시간 명령어 실행 상태 모니터링

**UI 구성요소**:

- 상태 카드 (장비별)
- 실시간 상태 지표
- 알림 섹션 (Toast 알림)
- 네비게이션 메뉴
- 필터바 (타입/상태 선택)
- 장비 목록 상세 보기

### 2. 장비상태변경 페이지 (Device Control)

**목적**: 장비를 선택하면 설정할 수 있는 항목이 표시되고 수정할 수 있는 페이지

**주요 기능**:

- 장비 선택 및 상세 정보 표시
- 장비별 설정 항목 동적 표시
- 자동/수동 모드 전환 기능
- 스케줄 설정 (시작/종료 시간)
- 실시간 상태 모니터링
- 설정 변경 및 적용
- 실시간 명령어 실행 상태 모니터링

**UI 구성요소**:

- 장비 선택 드롭다운/리스트
- 설정 폼 (동적 생성)
- 상태 표시 패널
- 제어 버튼 (켜기/끄기/설정)

**설정 항목 예시**:

- **자동 모드 설정** (스케줄/수동 모드)
- 전원 상태 (ON/OFF)
- 시작/종료 시간 (1차, 2차)
- 온도 설정 (냉난방기)
- 풍량 설정
- 운전 모드 (냉방/난방/송풍)

### 3. 장비등록 페이지 (Device Registration)

**목적**: 클라이언트 등록 및 장비 정보를 관리할 수 있는 페이지

**주요 기능**:

- 클라이언트 목록 조회 및 등록
- 클라이언트별 장비 정보 관리
- 새 장비 등록
- 장비 정보 수정
- 장비 삭제
- 저장 및 Import 기능
- 실시간 WebSocket 연결 상태 모니터링
- 프로세스 진행 상태 표시

**UI 구성요소**:

- 클라이언트 선택 드롭다운
- 장비 목록 테이블
- 장비 등록/수정 폼
- 검색 및 필터링 (지역별, 프로젝트별)
- Import/Export 버튼
- 프로세스 다이얼로그

**클라이언트 정보 필드**:

- 클라이언트 ID 및 이름
- 지역 정보
- 프로젝트 정보
- 등록 상태

**장비 정보 필드**:

- 장비 ID (d011, d021, d022, d061 등)
- 장비명 (조명, 냉난방기, 전열교환기, 통합센서 등)
- 장비 타입 (lighting, cooler, exchanger, integrated_sensor 등)
- 위치 정보
- IP 주소
- 통신 설정 (Modbus/접점제어)
- 자동 모드 지원 여부

### 4. 시스템셋팅 페이지 (System Settings)

**목적**: 시스템 전반의 설정을 관리할 수 있는 페이지

**주요 기능**:

- 네트워크 설정
- 통신 설정
- DNS 서버 등록
- 시스템 시간 설정
- 보안 설정
- 계절별 데이터 설정
- 장비 고급 설정 (온도 보정 등)

**UI 구성요소**:

- 설정 탭 메뉴
- 설정 폼
- 저장/취소 버튼
- 설정 검증
- 계절별 데이터 입력 폼

**설정 항목**:

- IP 주소 설정
- 서브넷 마스크
- 게이트웨이
- DNS 서버
- 통신 포트
- 타임아웃 설정
- 계절별 온도 보정값
- 장비별 고급 설정

### 5. 로그분석 페이지 (Log Analysis)

**목적**: 로그를 다방면으로 분석할 수 있는 페이지

**주요 기능**:

- 로그 파일 목록 조회
- 로그 내용 조회 및 검색
- 로그 필터링
- 로그 분석 차트
- 로그 파일 다운로드
- 실시간 로그 모니터링 (WebSocket 기반)
- 로그 파일 새로고침

**UI 구성요소**:

- 로그 파일 선택 드롭다운
- 로그 내용 테이블
- 검색 및 필터 패널
- 분석 차트
- 시간 범위 선택기
- Export 버튼
- 새로고침 버튼

**분석 기능**:

- 시간별 로그 분석
- 장비별 로그 분석
- 오류 패턴 분석
- 성능 지표 분석
- 사용량 통계
- 명령어 실행 이력 분석
- 자동/수동 모드 사용 패턴 분석
- 로그 파일별 상세 분석

### 6. 시스템 모니터링 페이지 (System Monitoring)

**목적**: 시스템 전반의 상태를 실시간으로 모니터링하는 페이지 (관리자 전용)

**주요 기능**:

- 서버 상태 모니터링 (CPU, 메모리, 업타임)
- 데이터베이스 상태 모니터링
- 하드웨어 상태 모니터링 (DDC, Modbus)
- 서비스 상태 모니터링
- 상위 서버 연결 상태 모니터링
- 데이터베이스 컬렉션 탐색
- 실시간 상태 새로고침

**UI 구성요소**:

- 서버 상태 카드
- 데이터베이스 상태 카드
- 하드웨어 상태 카드
- 서비스 상태 카드
- 상위 서버 상태 카드
- 데이터베이스 탐색 모달
- 새로고침 버튼

**모니터링 항목**:

- 서버: CPU 사용률, 메모리 사용률, 업타임, 프로세스 정보
- 데이터베이스: 연결 상태, 컬렉션 수, 데이터 크기, 인덱스 수
- 하드웨어: DDC 연결 상태, Modbus 연결 상태, 서비스 상태
- 서비스: 도메인별 서비스 가용성
- 상위 서버: 외부 서버 연결 상태 및 응답 시간

### 7. 사용자 관리 페이지 (User Management)

**목적**: 시스템 사용자들을 관리할 수 있는 페이지 (관리자 전용)

**주요 기능**:

- 사용자 목록 조회
- 새 사용자 등록
- 사용자 정보 수정
- 사용자 삭제
- 권한 관리
- API 키 관리
- 사용자 상태 관리

**UI 구성요소**:

- 사용자 목록 테이블
- 사용자 등록/수정 폼
- 검색 및 필터링
- 권한 설정 폼
- API 키 관리 섹션

**사용자 정보 필드**:

- 사용자 ID 및 이름
- 이메일 주소
- 역할 (admin, internal, external)
- API 키 정보
- 회사 ID
- 생성/수정 일시

### 8. 비밀번호 변경 페이지 (Change Password)

**목적**: 사용자가 자신의 비밀번호를 변경할 수 있는 페이지

**주요 기능**:

- 현재 비밀번호 확인
- 새 비밀번호 입력
- 비밀번호 확인
- 비밀번호 유효성 검증
- 비밀번호 변경 실행

**UI 구성요소**:

- 비밀번호 입력 폼
- 유효성 검증 메시지
- 변경/취소 버튼
- 보안 가이드

**보안 요구사항**:

- GS 인증 표준 준수
- 최소 8자 이상
- 영문, 숫자, 특수문자 조합
- 이전 비밀번호와 중복 불가

## 공통 UI/UX 가이드라인

### 디자인 원칙

- 직관적이고 사용하기 쉬운 인터페이스
- 반응형 디자인 (모바일/태블릿/데스크톱)
- 일관된 디자인 시스템
- 접근성 고려

### 네비게이션

- 상단 네비게이션 바
- 사이드바 메뉴 (필요시)
- 브레드크럼 네비게이션
- 빠른 액세스 버튼

### 상태 표시

- 색상 코딩 (정상: 녹색, 경고: 노란색, 오류: 빨간색)
- 아이콘과 텍스트 조합
- 실시간 업데이트
- 자동/수동 모드 상태 표시 (자동: 🔄, 수동: 👤)
- 스케줄 모드 활성화 상태 표시

### 데이터 처리

- 로딩 상태 표시
- 에러 메시지 표시
- 성공 메시지 표시
- 데이터 검증

## 기술 요구사항

### 프론트엔드

- **React 19.1.0**: 최신 React 버전
- **TypeScript 5.0.0**: 타입 안전성 보장
- **Vite 7.0.0**: 빠른 빌드 도구
- **Tailwind CSS 4.1.0**: 유틸리티 기반 CSS 프레임워크
- **@tanstack/react-query 5.81.5**: 서버 상태 관리
- **@tanstack/react-table 8.21.3**: 테이블 컴포넌트
- **Axios 1.6.8**: HTTP 클라이언트
- **Radix UI**: 접근성 우선 컴포넌트 라이브러리
- **Lucide React 0.525.0**: 아이콘 라이브러리
- **React Router DOM 7.6.3**: 클라이언트 사이드 라우팅
- **React Use WebSocket 4.13.0**: WebSocket 연결
- **Recharts 3.1.0**: 차트 라이브러리
- **Sonner 2.0.6**: Toast 알림
- **XLSX 0.18.5**: Excel 파일 처리
- **Zod 4.0.5**: 스키마 검증
- **pnpm 10.13.1**: 패키지 매니저

### 백엔드 연동

- **RESTful API**: REST 원칙 기반 API 설계
- **WebSocket**: 실시간 데이터 통신
- **JWT 인증**: 토큰 기반 인증 시스템
- **에러 핸들링**: 표준화된 에러 응답
- **명령어 실행 결과 실시간 피드백**: WebSocket을 통한 실시간 상태 업데이트
- **Data 컬렉션 자동 업데이트**: 폴링 시스템을 통한 자동 데이터 동기화
- **내부/외부 API 분리**: API 키 타입별 권한 관리

### 성능 요구사항

- **페이지 로딩 시간**: < 3초
- **실시간 데이터 업데이트**: < 1초 (WebSocket 기반)
- **명령어 실행 응답 시간**: < 2초
- **반응형 디자인**: 모든 디바이스 지원
- **브라우저 호환성**: Chrome, Firefox, Safari, Edge
- **모바일/태블릿 최적화**: 터치 인터페이스 지원
- **코드 스플리팅**: Vite manualChunks를 통한 최적화
- **메모리 최적화**: React.memo, useMemo 활용
- **캐싱 전략**: React Query를 통한 스마트 캐싱

## 보안 요구사항

- **사용자 인증 및 권한 관리**: JWT 토큰 기반 인증, 역할 기반 접근 제어
- **API 키 보안**: 내부/외부/universal API 키 분리 관리
- **데이터 암호화**: HTTPS 통신, 민감 정보 암호화
- **세션 관리**: sessionStorage 기반 상태 관리
- **로그 보안**: 접근 로그 기록, 보안 이벤트 모니터링
- **명령어 실행 권한 검증**: 사용자별 명령어 실행 권한 검증
- **장비 제어 접근 제어**: 관리자/내부/외부 사용자별 접근 제어
- **비밀번호 보안**: GS 인증 표준 준수
- **CORS 설정**: Cross-Origin Resource Sharing 보안 설정

## 테스트 요구사항

- **단위 테스트**: Jest 기반 컴포넌트 및 함수 테스트
- **통합 테스트**: API 연동 및 데이터 플로우 테스트
- **E2E 테스트**: 사용자 시나리오 기반 테스트
- **성능 테스트**: 페이지 로딩 시간 및 메모리 사용량 테스트
- **보안 테스트**: 인증 및 권한 검증 테스트
- **명령어 실행 테스트**: 장비 제어 명령어 실행 테스트
- **자동/수동 모드 전환 테스트**: 모드 전환 기능 테스트
- **스케줄 설정 테스트**: 시간 설정 및 스케줄 실행 테스트
- **WebSocket 연결 테스트**: 실시간 통신 테스트
- **반응형 디자인 테스트**: 다양한 화면 크기 테스트

## 배포 및 운영

### Docker 배포

- **개발환경**: `docker-compose.dev.yml` 사용
- **프로덕션환경**: `docker-compose.prod.yml` 사용
- **Node.js 18-alpine**: 통일된 런타임 환경
- **MongoDB 6.0.15**: 데이터베이스
- **Nginx 1.28.0**: 리버스 프록시

### CI/CD 파이프라인

- **GitHub Actions**: 자동 빌드 및 배포
- **GHCR**: GitHub Container Registry 이미지 저장
- **태그 기반 배포**: `v*.*.*` 패턴으로 자동 배포
- **배포 패키지**: `deployment-{version}.zip` 자동 생성

### 모니터링

- **시스템 모니터링**: CPU, 메모리, 디스크 사용량
- **애플리케이션 모니터링**: 서비스 상태, 에러 로그
- **하드웨어 모니터링**: DDC, Modbus 연결 상태
- **실시간 알림**: WebSocket 기반 상태 업데이트

## 개발 환경 설정

### 필수 요구사항

- **Node.js 18**: 런타임 환경
- **pnpm**: 패키지 매니저
- **Docker**: 컨테이너 환경
- **Git**: 버전 관리

### 개발 도구

- **Vite**: 개발 서버 및 빌드 도구
- **ESLint**: 코드 품질 검사
- **Prettier**: 코드 포맷팅
- **TypeScript**: 타입 검사

### 환경 설정

- **개발환경**: `NODE_ENV=development`
- **프로덕션환경**: `NODE_ENV=production`
- **환경변수**: `.env` 파일 기반 설정
- **API 엔드포인트**: 환경별 동적 설정
