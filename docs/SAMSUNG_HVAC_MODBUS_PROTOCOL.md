# 삼성 시스템 에어컨 Modbus RTU 프로토콜 가이드

## 개요

이 문서는 삼성 시스템 에어컨과의 Modbus RTU 통신을 위한 프로토콜 명세서입니다. 실외기용 모드버스 중계기(AIM-B19N)와 실내기용 모드버스 중계기(AIM-A19N)를 통한 연동 방법을 다룹니다.

## 모드버스 중계기 제품 소개

### 실외기용 모드버스 중계기 AIM-B19N

| 제품명       | 주요 기능                                                                                                                                                                                              | 연동 제품                                                                                                                                           | 연결 방법                               |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------- |
| **AIM-B19N** | • 프로토콜: Modbus RTU<br>• 연동가능 제품: DVM Home, DVM, CAC, EHS, ERV/FCU 중계기<br>• 최대 연결가능 수량: 실외기 1대 또는 ERV/FCU 중계기 1대<br>• 연결 방식: 실외기 또는 ERV/FCU 중계기와 1대 1 연결 | • DVM Home (2.5~5HP 단배관/다배관)<br>• DVM Home (6HP 단배관)<br>• 기타 ERV/FCU 중계기<br>• 실내기별 단독세대 구성 시<br>• AHU 연동 시<br>• AHU Kit | 실외기 또는 ERV/FCU 중계기와 1대 1 연결 |

### 실내기용 모드버스 중계기 AIM-A19N

| 제품명       | 주요 기능                                                                                                                                                                                      | 연동 제품                         | 연결 방법                                 |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------- | ----------------------------------------- |
| **AIM-A19N** | • 프로토콜: Modbus RTU<br>• 연동가능 제품: EHP 용 실내기, ERV, AHU<br>• 최대 연결가능 수량: 실내기 1대 또는 ERV 1대 또는 AHU Kit 1대<br>• 연결 방식: 실내기 또는 ERV 또는 AHU Kit와 1대 1 연결 | • ERV<br>• AHU<br>• EHP 용 실내기 | 실내기 또는 ERV 또는 AHU Kit와 1대 1 연결 |

## 통신 사양 (Communication Spec)

### 기본 통신 설정

| 항목                    | 값         |
| ----------------------- | ---------- |
| 프로토콜                | Modbus RTU |
| 속도 (Baud Rate)        | 9600 bps   |
| 데이터 비트 (Data Bits) | 8 bit      |
| 정지 비트 (Stop Bits)   | 1 bit      |
| 패리티 (Parity)         | Even       |

### 통신 상태 확인

- **모드버스 중계기 ↔ 실외기 통신**: Y-GRN LED 점멸
- **모드버스 중계기 ↔ 3rd party 통신**: RED LED 점멸

## 모드버스 주소(Slave ID) 설정 방법

### Single 실외기 구성

모드버스 주소는 DIP 스위치(SW1~SW5)를 통해 설정합니다.

#### 주소 설정 예시

| 모드버스 주소 | SW1 설정 | SW5 1번 핀      | SW5 2번 핀      |
| ------------- | -------- | --------------- | --------------- |
| 1번           | 1        | OFF             | OFF             |
| 57번          | 9        | ON              | ON              |
| 147번         | 3        | ON (SW4 1번 핀) | ON (SW5 2번 핀) |

**설명:**

- 모드버스 주소 1번: SW1만 1로 설정
- 모드버스 주소 57번: SW5 1번 핀 ON, SW5 2번 핀 ON, SW1을 9로 설정
- 모드버스 주소 147번: SW4 1번 핀 ON, SW5 2번 핀 ON, SW1을 3으로 설정

### 공장 출하 상태 주소 정보

| 항목                 | 주소 |
| -------------------- | ---- |
| 실외기 채널 주소     | 00   |
| 실내기 메인 주소     | 00   |
| 모드버스 중계기 주소 | 1    |

**참고:** 실외기-실내기 1:1 연결 시 모든 제품의 주소를 설정하지 않은 상태에서 Modbus Slave ID 1번으로 통신 가능합니다.

## 온도 값 계산 방법

### 모니터링 값 → 온도 변환

**영상 온도 (0 ≤ 모니터링 값 ≤ 31,129):**

```
온도 = (모니터링 값) / 10
```

**영하 온도 (모니터링 값 ≥ 31,130):**

```
온도 = -((65535 - 모니터링 값 + 1) / 10)
```

### 설정 온도 → 모니터링 값 변환

설정 온도 값 전송 시 설정온도 × 10으로 모드버스 중계기에 전송합니다.

**온도 범위:**

- 냉방: 18~30도
- 난방: 16~30도

**예시:**

- 24도 설정 → 24 × 10 = 240(dec) = 0x00F0

## 실외기용 모드버스 중계기 메모리맵

### 실내기 메인주소 00번

| 레지스터 번호 (dec) | 인덱스 | Modbus PDU 주소 (hex) | Function Code | 설명 | 상세 내용 |
| ------------------- | ------ | --------------------- | ------------- | ---- | --------- | ---- | ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                     |        |                       | 0x03          | 0x04 | 0x06      | 0x10 |                          |                                                                                                                                                                                                                 |
| 40053               | 2      | 0x0034 (52)           | O             |      | O         | O    | 에어컨 운전 ON/OFF       | • 0x0000: OFF<br>• 0x0001: ON<br>• 그 외: 무효                                                                                                                                                                  |
| 40054               | 3      | 0x0035 (53)           | O             |      | O         | O    | 에어컨 운전 모드         | • 0x0000: 자동<br>• 0x0001: 냉방<br>• 0x0002: 제습<br>• 0x0003: 송풍<br>• 0x0004: 난방<br>• 그 외: 무효                                                                                                         |
| 40055               | 4      | 0x0036 (54)           | O             |      | O         | O    | 실내 팬 풍량             | • 0x0000: 자동<br>• 0x0001: 미용<br>• 0x0002: 약풍<br>• 0x0003: 강풍<br>• 그 외: 무효                                                                                                                           |
| 40056               | 5      | 0x0037 (55)           | O             |      | O         | O    | 상하 Swing ON/OFF        | • 0x0000: OFF<br>• 0x0001: ON<br>• 그 외: 무효                                                                                                                                                                  |
| 30057               | 6      | 0x0038 (56)           |               | O    |           |      | 필터 청소 알림           | • 0x0000: OFF<br>• 0x0001: ON<br>• 그 외: 무효                                                                                                                                                                  |
| 40058               | 7      | 0x0039 (57)           |               |      | O         |      | 필터 청소 알림 표시 해제 | • 0x0000: 표시 유지<br>• 0x0001: 표시 해제<br>• 그 외: 무효                                                                                                                                                     |
| 40059               | 8      | 0x003A (58)           | O             |      | O         | O    | 설정 온도                | 설정 온도 × 10<br>• 냉방: 18~30℃<br>• 난방: 16~30℃<br>예) 24도 = 24 × 10 = 240(dec) = 0x00F0                                                                                                                    |
| 30060               | 9      | 0x003B (59)           |               | O    |           |      | 실내 온도                | 실내 온도 × 10 (범위: -41~100℃)<br>• 0x8000 이상 시 영하 온도<br>• 0x8000 미만 시 영상 온도<br>예) 0x0140 = 320(dec) = 32 × 10 = 32도<br>0xFF9C = (0xFFFF-0xFF9C + 0x0001)/10 = 0x0064/10 = 100/10 = 10 → -10도 |
| 30061               | 10     | 0x003C (60)           |               | O    |           |      | 토출 온도                | 토출 온도 × 10<br>• 0x8000 이상 시 영하 온도<br>• 0x8000 미만 시 영상 온도<br>예) 0x0140 = 320(dec) = 32 × 10 = 32도<br>0xFF9C = (0xFFFF-0xFF9C + 0x0001)/10 = 0x0064/10 = 100/10 = 10 → -10도                  |
| 40062               | 11     | 0x003D (61)           | O             |      | O         | O    | 냉방 토출 설정온도       | 냉방 토출 설정 온도 × 10<br>• 범위: 8~18℃ (AHU: 8~25℃)<br>예) 0x0064 = 100(dec) = 10 × 10 = 10도                                                                                                                |
| 40063               | 12     | 0x003E (62)           | O             |      | O         | O    | 난방 토출 설정온도       | 난방 토출 설정 온도 × 10<br>• 범위: 30~43℃ (AHU: 18~43℃)<br>예) 0x01AE = 430(dec) = 43 × 10 = 43도                                                                                                              |
| 30064               | 13     | 0x003F (63)           |               | O    |           |      | 실내기 통합 에러 코드    | • 0x0000, 0xFFFF: 에러없음<br>• 0x0064~0x0384 (dec: 100~900): 에러 코드<br>• 그 외: 무효                                                                                                                        |
| 40065               | 14     | 0x0040 (64)           | O             |      | O         | O    | 유무선리모컨 제한        | **Read:**<br>• 0x0000: 제한없음<br>• Others: 제한 설정<br><br>**Write:**<br>• 0x0000: 제한없음<br>• 0x6363: 제한 설정                                                                                           |
| 40079               | 28     | 0x004E (78)           | O             |      | O         | O    | 정음 제어 ON/OFF         | • 0x0000: OFF<br>• 0x0001: ON<br>• 그 외: 무효                                                                                                                                                                  |
| 40080               | 29     | 0x004F (79)           | O             |      | O         | O    | 외출 기능 ON/OFF         | • 0x0000: OFF<br>• 0x0001: ON<br>• 그 외: 무효                                                                                                                                                                  |
| 40081               | 30     | 0x0050 (80)           | O             |      | O         | O    | 무릉 기능 ON/OFF         | For 360 cassette indoor unit only<br>• 0x0000: OFF<br>• 0x0009: ON<br>• 그 외: 무효                                                                                                                             |

### Function Code 설명

| Function Code | 이름                     | 설명                            |
| ------------- | ------------------------ | ------------------------------- |
| 0x03          | Read Holding Registers   | Holding Register 읽기           |
| 0x04          | Read Input Registers     | Input Register 읽기 (읽기 전용) |
| 0x06          | Write Single Register    | 단일 Holding Register 쓰기      |
| 0x10          | Write Multiple Registers | 다중 Holding Register 쓰기      |

## 사용 예시

### 1. 에어컨 운전 모드 읽기

**요청 (Function Code 0x03 - Read Holding Registers):**

```
Slave ID: 0x01
Function Code: 0x03
Start Address: 0x0035 (High), 0x0000 (Low)
Quantity: 0x0001
CRC-16: [계산 필요]
```

**응답:**

```
Slave ID: 0x01
Function Code: 0x03
Byte Count: 0x02
Data: 0x0001 (냉방 모드)
CRC-16: [계산 필요]
```

### 2. 설정 온도 쓰기 (24도 설정)

**요청 (Function Code 0x06 - Write Single Register):**

```
Slave ID: 0x01
Function Code: 0x06
Register Address: 0x003A (High), 0x0000 (Low)
Register Value: 0x00F0 (240 = 24 × 10)
CRC-16: [계산 필요]
```

**응답:**

```
Slave ID: 0x01
Function Code: 0x06
Register Address: 0x003A (High), 0x0000 (Low)
Register Value: 0x00F0
CRC-16: [계산 필요]
```

### 3. 실내 온도 읽기

**요청 (Function Code 0x04 - Read Input Registers):**

```
Slave ID: 0x01
Function Code: 0x04
Start Address: 0x003B (High), 0x0000 (Low)
Quantity: 0x0001
CRC-16: [계산 필요]
```

**응답 (32도인 경우):**

```
Slave ID: 0x01
Function Code: 0x04
Byte Count: 0x02
Data: 0x0140 (320 = 32 × 10)
CRC-16: [계산 필요]
```

**온도 계산:**

```
320 / 10 = 32도
```

### 4. 에어컨 전원 제어 (ON)

**요청 (Function Code 0x06 - Write Single Register):**

```
Slave ID: 0x01
Function Code: 0x06
Register Address: 0x0034 (High), 0x0000 (Low)
Register Value: 0x0001 (ON)
CRC-16: [계산 필요]
```

## 주의사항

1. **온도 값 계산**: 모니터링 값은 항상 10배수로 전송/수신되므로, 설정 시 ×10, 읽기 시 ÷10을 반드시 수행해야 합니다.

2. **온도 범위 제한**:

   - 냉방 설정온도: 18~30℃
   - 난방 설정온도: 16~30℃
   - 범위를 벗어나는 값은 무효 처리됩니다.

3. **영하 온도 처리**: 0x8000 이상의 값은 영하 온도이므로 2의 보수를 이용해 계산해야 합니다.

4. **에러 코드**: 0x0064~0x0384 (dec: 100~900) 범위의 값은 에러 코드입니다. 0x0000 또는 0xFFFF는 정상 상태입니다.

5. **통신 상태 확인**: LED 점멸 상태를 확인하여 통신이 정상적으로 이루어지는지 확인하세요.

## 참고 자료

- [SNGIL_DDC_MODBUS_PACKETS.md](./SNGIL_DDC_MODBUS_PACKETS.md) - SNGIL DDC Modbus 패킷 테스트 가이드
- [SNGIL_DDC_COMMANDS.md](./SNGIL_DDC_COMMANDS.md) - SNGIL DDC 명령어 명세
- [DEVICE_UNIT_SPEC.md](./DEVICE_UNIT_SPEC.md) - 장비 및 유닛 사양서

---

> 💡 **주의사항**: 이 문서는 삼성 시스템 에어컨 Modbus RTU 통신 가이드입니다. 실제 연동 시 장비의 정확한 사양서와 모드버스 중계기 매뉴얼을 함께 참조하세요.
